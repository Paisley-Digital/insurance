<div class="!p-9 w-auto h-auto">
  <mat-card>
    @if (_view() === 'employee') {
    <ng-container [ngTemplateOutlet]="employeeTemplate" />
    } @else if (_view() === 'upload') {
    <ng-container [ngTemplateOutlet]="uploadTemplate" />
    } @else if (_view() === 'entity') {
    <ng-container [ngTemplateOutlet]="entityTemplate" />
    } @else if (_view() === 'employeeKyc') {
    <ng-container [ngTemplateOutlet]="employeeKycTemplate" />
    }
  </mat-card>
</div>

<ng-template #employeeTemplate>
  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="employer">
      <th mat-header-cell *matHeaderCellDef>Employer</th>
      <td mat-cell *matCellDef="let element">{{ element.employer }}</td>
    </ng-container>

    <ng-container matColumnDef="lastUpdate">
      <th mat-header-cell *matHeaderCellDef>Last Update</th>
      <td mat-cell *matCellDef="let element">{{ element.lastUpdate }}</td>
    </ng-container>

    <ng-container matColumnDef="numberOfForms">
      <th mat-header-cell *matHeaderCellDef>Number Of Forms</th>
      <td mat-cell *matCellDef="let element">{{ element.numberOfForms }}</td>
    </ng-container>

    <ng-container matColumnDef="totalEmployees">
      <th mat-header-cell *matHeaderCellDef>Total Employees</th>
      <td mat-cell *matCellDef="let element">{{ element.totalEmployees }}</td>
    </ng-container>

    <ng-container matColumnDef="enrolledMembers">
      <th mat-header-cell *matHeaderCellDef>Enrolled Members</th>
      <td mat-cell *matCellDef="let element">
        {{ element.enrolledMembers }}
      </td>
    </ng-container>

    <ng-container matColumnDef="issues">
      <th mat-header-cell *matHeaderCellDef>Issues</th>
      <td mat-cell *matCellDef="let element">{{ element.issues }}</td>
    </ng-container>

    <ng-container matColumnDef="kycStatus">
      <th mat-header-cell *matHeaderCellDef>KYC Status</th>
      <td mat-cell *matCellDef="let element">
        <span class="status" [ngClass]="element.kycStatus.toLowerCase()">{{
          element.kycStatus
        }}</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <mat-icon svgIcon="chevron-right" (click)="nextStep()"></mat-icon>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator [hidePageSize]="true" showFirstLastButtons></mat-paginator>
</ng-template>

<ng-template #uploadTemplate>
  <div class="flex flex-col gap-4 min-h-[420px] !p-6">
    <div class="flex items-center space-x-2">
      <mat-icon svgIcon="circle" color="primary" (click)="back()"></mat-icon>
      <span class="font-bold text-lg">Operational Modules Dashboard</span>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 !gap-6 mt-8">
      <mat-card
        class="flex-1 w-full cursor-pointer p-4 !border !border-gray-300 rounded-2xl"
        (click)="entity()"
      >
        <div class="flex flex-col items-start gap-3">
          <mat-icon svgIcon="entity-KYC" class="!w-[32px] !h-[32px]" />
          <div class="!gap-1">
            <h1 class="font-semibold text-base">Entity KYC</h1>
            <div class="text-sm text-gray-600">
              Manage Entity verification documents and monitor compliance
              status.
            </div>
          </div>
        </div>
      </mat-card>

      <mat-card
        class="flex-1 w-full cursor-pointer p-4 !border !border-gray-300 rounded-2xl"
        (click)="employee()"
      >
        <div class="flex flex-col items-start gap-3">
          <mat-icon
            svgIcon="employee-kyc"
            class="!w-[32px] !h-[32px]"
          ></mat-icon>
          <div class="!gap-1">
            <h1 class="font-semibold text-base">Employee KYC</h1>
            <div class="text-sm text-gray-600">
              Add, view, and manage employees associated with registered
              employers.
            </div>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</ng-template>

<ng-template #entityTemplate>
  <div class="!p-6">
    <div class="flex items-center space-x-2">
      <mat-icon
        svgIcon="circle"
        color="primary"
        (click)="backEntity()"
      ></mat-icon>
      <span class="font-bold text-lg"> KYC Status Overview – Emaar</span>
    </div>
    <table mat-table [dataSource]="entityDataSource">
      <ng-container matColumnDef="employer">
        <th mat-header-cell *matHeaderCellDef>Person</th>
        <td mat-cell *matCellDef="let element">{{ element.person }}</td>
      </ng-container>

      <ng-container matColumnDef="lastUpdate">
        <th mat-header-cell *matHeaderCellDef>PEP</th>
        <td mat-cell *matCellDef="let element">{{ element.pep }}</td>
      </ng-container>

      <ng-container matColumnDef="numberOfForms">
        <th mat-header-cell *matHeaderCellDef>Risk Level</th>
        <td mat-cell *matCellDef="let element">{{ element.riskLevel }}</td>
      </ng-container>

      <ng-container matColumnDef="totalEmployees">
        <th mat-header-cell *matHeaderCellDef>Document Type</th>
        <td mat-cell *matCellDef="let element">{{ element.documentType }}</td>
      </ng-container>

      <ng-container matColumnDef="enrolledMembers">
        <th mat-header-cell *matHeaderCellDef>Submission Date</th>
        <td mat-cell *matCellDef="let element">{{ element.submissionData }}</td>
      </ng-container>

      <ng-container matColumnDef="issues">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let element">{{ element.action }}</td>
      </ng-container>

      <ng-container matColumnDef="kycStatus">
        <th mat-header-cell *matHeaderCellDef>KYC Status</th>
        <td mat-cell *matCellDef="let element">
          <span class="status" [ngClass]="element.kycStatus.toLowerCase()">{{
            element.kycStatus
          }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <mat-icon svgIcon="chevron-down"></mat-icon>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
  <mat-paginator [hidePageSize]="true" showFirstLastButtons></mat-paginator>
</ng-template>

<ng-template #employeeKycTemplate>
  <div class="flex items-center justify-between mb-4">
    <div class="text-lg font-semibold flex items-center gap-2">
      <mat-icon svgIcon="circle" (click)="backEntity()"></mat-icon>
      Emaar Employee Insurance List
    </div>
  </div>

  <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
    <mat-tab>
      <ng-template mat-tab-label>
        <span class="flex items-center gap-1">
          <mat-icon svgIcon="tick-circle" class="text-green-600"></mat-icon>
          <span class="text-xs text-green-600" style="font-size: 14px"
            >Verified Documents</span
          >
        </span>
      </ng-template>
      <div class="flex justify-start mb-4 mt-4">
        <button mat-raised-button color="primary" class="cross-check-btn">
          <mat-icon
            style="height: auto; width: 16px"
            svgIcon="white-check"
          ></mat-icon>
          <span> CROSS CHECKING & EXPORT </span>
        </button>
      </div>
      <!-- ✅ Verified Documents Table -->
      <table
        style="padding: 0"
        mat-table
        [dataSource]="kycDataSource"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="fullName">
          <th mat-header-cell *matHeaderCellDef>Full Name</th>
          <td mat-cell *matCellDef="let element">{{ element.fullName }}</td>
        </ng-container>

        <ng-container matColumnDef="dateOfBirth">
          <th mat-header-cell *matHeaderCellDef>Date of Birth</th>
          <td mat-cell *matCellDef="let element">
            {{ element.dateOfBirth }}
          </td>
        </ng-container>

        <ng-container matColumnDef="nationality">
          <th mat-header-cell *matHeaderCellDef>Nationality</th>
          <td mat-cell *matCellDef="let element">
            {{ element.nationality }}
          </td>
        </ng-container>

        <ng-container matColumnDef="gender">
          <th mat-header-cell *matHeaderCellDef>Gender</th>
          <td mat-cell *matCellDef="let element">{{ element.gender }}</td>
        </ng-container>

        <ng-container matColumnDef="enrolledSince">
          <th mat-header-cell *matHeaderCellDef>Enrolled Since</th>
          <td mat-cell *matCellDef="let element">
            {{ element.enrolledSince }}
          </td>
        </ng-container>

        <ng-container matColumnDef="renevwalDate">
          <th mat-header-cell *matHeaderCellDef>Renewal Date</th>
          <td mat-cell *matCellDef="let element">
            {{ element.renevwalDate }}
          </td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <mat-icon svgIcon="chevron-down"></mat-icon>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsKyc"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsKyc"></tr>
      </table>
      <mat-paginator [hidePageSize]="true" showFirstLastButtons></mat-paginator>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <span class="flex items-center gap-1">
          <mat-icon
            svgIcon="infocircle-bulk"
            class="text-yellow-600"
          ></mat-icon>
          <span class="text-xs text-yellow-600" style="font-size: 14px"
            >Expiring Soon</span
          >
        </span>
      </ng-template>
      <div class="flex justify-start mb-4 mt-4">
        <button mat-raised-button color="primary" class="cross-check-btn">
          <mat-icon
            style="height: auto; width: 16px"
            svgIcon="white-check"
          ></mat-icon>
          <span> CROSS CHECKING & EXPORT </span>
        </button>
      </div>
      <table
        style="padding: 0"
        mat-table
        [dataSource]="kycExpireDataSource"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="fullName">
          <th mat-header-cell *matHeaderCellDef>Full Name</th>
          <td mat-cell *matCellDef="let element">{{ element.fullName }}</td>
        </ng-container>

        <ng-container matColumnDef="dateOfBirth">
          <th mat-header-cell *matHeaderCellDef>Date of Birth</th>
          <td mat-cell *matCellDef="let element">
            {{ element.dateOfBirth }}
          </td>
        </ng-container>

        <ng-container matColumnDef="nationality">
          <th mat-header-cell *matHeaderCellDef>Nationality</th>
          <td mat-cell *matCellDef="let element">
            {{ element.nationality }}
          </td>
        </ng-container>

        <ng-container matColumnDef="gender">
          <th mat-header-cell *matHeaderCellDef>Gender</th>
          <td mat-cell *matCellDef="let element">{{ element.gender }}</td>
        </ng-container>

        <ng-container matColumnDef="remainingValidity">
          <th mat-header-cell *matHeaderCellDef>
            Remaining Validity
            <mat-icon svgIcon="expire"></mat-icon>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.remainingValidity }}
          </td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <mat-icon svgIcon="chevron-down"></mat-icon>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsKycExpire"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumnsKycExpire"
        ></tr>
      </table>
      <mat-paginator [hidePageSize]="true" showFirstLastButtons></mat-paginator>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <span class="flex items-center gap-1">
          <mat-icon svgIcon="closecircle-bulk" class="text-red-600"></mat-icon>
          <span class="text-xs text-red-600" style="font-size: 14px"
            >Rejected</span
          >
        </span>
      </ng-template>

      <div class="flex justify-start mb-4 mt-4">
        <button mat-raised-button color="primary" class="cross-check-btn">
          <mat-icon
            style="height: auto; width: 16px"
            svgIcon="white-check"
          ></mat-icon>
          <span> CROSS CHECKING & EXPORT </span>
        </button>
      </div>

      <table
        style="padding: 0"
        mat-table
        [dataSource]="kycRejectedDataSource"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="fullName">
          <th mat-header-cell *matHeaderCellDef>Full Name</th>
          <td mat-cell *matCellDef="let element">{{ element.fullName }}</td>
        </ng-container>

        <ng-container matColumnDef="dateOfBirth">
          <th mat-header-cell *matHeaderCellDef>Date of Birth</th>
          <td mat-cell *matCellDef="let element">
            {{ element.dateOfBirth }}
          </td>
        </ng-container>

        <ng-container matColumnDef="nationality">
          <th mat-header-cell *matHeaderCellDef>Nationality</th>
          <td mat-cell *matCellDef="let element">
            {{ element.nationality }}
          </td>
        </ng-container>

        <ng-container matColumnDef="gender">
          <th mat-header-cell *matHeaderCellDef>Gender</th>
          <td mat-cell *matCellDef="let element">{{ element.gender }}</td>
        </ng-container>

        <ng-container matColumnDef="rejectionReason">
          <th mat-header-cell *matHeaderCellDef>Rejection Reason</th>
          <td mat-cell *matCellDef="let element">
            {{ element.rejectionReason }}
          </td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <mat-icon svgIcon="chevron-down"></mat-icon>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsKycRejected"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumnsKycRejected"
        ></tr>
      </table>
      <mat-paginator [hidePageSize]="true" showFirstLastButtons></mat-paginator>
    </mat-tab>
  </mat-tab-group>

  <!-- <div class="flex justify-start mb-4">
      <button mat-raised-button color="primary" class="cross-check-btn">
        <mat-icon
          style="height: auto; width: 16px"
          svgIcon="white-check"
        ></mat-icon>
        <span> CROSS CHECKING & EXPORT </span>
      </button>
    </div> -->

  <!-- <table
      style="padding: 0"
      mat-table
      [dataSource]="kycDataSource"
      class="mat-elevation-z8"
    >
      <ng-container matColumnDef="fullName">
        <th mat-header-cell *matHeaderCellDef>Full Name</th>
        <td mat-cell *matCellDef="let element">{{ element.fullName }}</td>
      </ng-container>

      <ng-container matColumnDef="dateOfBirth">
        <th mat-header-cell *matHeaderCellDef>Date of Birth</th>
        <td mat-cell *matCellDef="let element">{{ element.dateOfBirth }}</td>
      </ng-container>

      <ng-container matColumnDef="nationality">
        <th mat-header-cell *matHeaderCellDef>Nationality</th>
        <td mat-cell *matCellDef="let element">{{ element.nationality }}</td>
      </ng-container>

      <ng-container matColumnDef="gender">
        <th mat-header-cell *matHeaderCellDef>Gender</th>
        <td mat-cell *matCellDef="let element">{{ element.gender }}</td>
      </ng-container>

      <ng-container matColumnDef="enrolledSince">
        <th mat-header-cell *matHeaderCellDef>Enrolled Since</th>
        <td mat-cell *matCellDef="let element">{{ element.enrolledSince }}</td>
      </ng-container>

      <ng-container matColumnDef="renevwalDate">
        <th mat-header-cell *matHeaderCellDef>Renewal Date</th>
        <td mat-cell *matCellDef="let element">{{ element.renevwalDate }}</td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <mat-icon svgIcon="chevron-down"></mat-icon>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsKyc"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumnsKyc"></tr>
    </table>

    <mat-paginator [hidePageSize]="true" showFirstLastButtons></mat-paginator> -->
</ng-template>
